(this["webpackJsonpmusic-client"]=this["webpackJsonpmusic-client"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n,r,l,i=a(0),c=a.n(i),o=a(29),u=a.n(o),m=a(91),s=a(147),d=a(150),p=a(28),f=a(33),b=a(14),E=a(35),h=a(36),v=a.n(h),g=a(18);function y(){var e=Object(E.a)(["\n    mutation Signin($input: SigninInput!) {\n  signin(input: $input) {\n    error\n  }\n}\n    "]);return y=function(){return e},e}function w(){var e=Object(E.a)(["\n    mutation UpdateMe($input: UpdateMeInput!) {\n  updateMe(input: $input) {\n    currentUser {\n      id\n      username\n      name\n    }\n    error\n  }\n}\n    "]);return w=function(){return e},e}function j(){var e=Object(E.a)(["\n    query Me {\n  me {\n    id\n    name\n    username\n    role {\n      id\n      name\n      description\n      allowedActions\n    }\n  }\n}\n    "]);return j=function(){return e},e}function O(){var e=Object(E.a)(["\n    query Artists($conditions: ArtistsConditions, $offset: Int, $limit: PositiveNumber, $order: ArtistsQueryOrder!, $asc: Boolean) {\n  items: artists(conditions: $conditions, offset: $offset, limit: $limit, order: $order, asc: $asc) {\n    id\n    name\n    artworkM {\n      url\n      width\n      height\n    }\n  }\n}\n    "]);return O=function(){return e},e}function A(){var e=Object(E.a)(["\n    query Artist($id: TTID!) {\n  artist(id: $id) {\n    id\n    name\n    artworkL {\n      url\n      width\n      height\n    }\n  }\n}\n    "]);return A=function(){return e},e}function k(){var e=Object(E.a)(["\n    query Albums($conditions: AlbumsConditions, $offset: Int, $limit: PositiveNumber, $order: AlbumsQueryOrder!, $asc: Boolean) {\n  items: albums(conditions: $conditions, offset: $offset, limit: $limit, order: $order, asc: $asc) {\n    id\n    name\n    artworkM {\n      url\n      width\n      height\n    }\n    appleMusicAlbum {\n      id\n    }\n    itunesAlbum {\n      id\n    }\n    spotifyAlbum {\n      id\n    }\n  }\n}\n    "]);return k=function(){return e},e}function I(){var e=Object(E.a)(["\n    query Album($id: TTID!) {\n  album(id: $id) {\n    id\n    totalTracks\n    name\n    releaseDate\n    artworkL {\n      url\n      width\n      height\n    }\n    artworkM {\n      url\n      width\n      height\n    }\n    appleMusicAlbum {\n      id\n      appleMusicId\n    }\n    itunesAlbum {\n      id\n      appleMusicId\n    }\n    spotifyAlbum {\n      id\n      spotifyId\n    }\n  }\n}\n    "]);return I=function(){return e},e}!function(e){e.Name="NAME",e.New="NEW",e.Release="RELEASE",e.Popularity="POPULARITY",e.TotalTracks="TOTAL_TRACKS"}(n||(n={})),function(e){e.New="NEW",e.Popularity="POPULARITY"}(r||(r={})),function(e){e.Pending="PENDING",e.Active="ACTIVE",e.Ignore="IGNORE"}(l||(l={}));var M=v()(I());var x=v()(k());var S=v()(A());var $=v()(O());var C=v()(j());var P=v()(w());var N=v()(y());var T=a(139),L=a(136),U=function(e){var t=e.className,a=void 0===t?"":t,n=e.src,r=void 0===n?"":n,l=e.title,i=void 0===l?"":l,o=e.width;return""===r&&(r="".concat("","/no_image.png")),c.a.createElement(L.a,{className:a,image:r,title:i,style:{width:o,height:o}})},R=a(138),F=a(140),q=a(141),D=a(142),B=function(e){var t=e.linkUrl?{component:p.b,to:e.linkUrl}:{};return c.a.createElement(R.a,Object(b.a)({container:!0,item:!0,xs:!0,direction:"row",justify:"center",alignItems:"center",style:{textDecoration:"none"}},t,{children:c.a.createElement(T.a,{style:{width:e.width,position:"relative"}},c.a.createElement(F.a,null,c.a.createElement(R.a,{container:!0,style:{position:"absolute",left:"5px",bottom:"5px"}},e.componentInImage?e.componentInImage:c.a.createElement(c.a.Fragment,null)),c.a.createElement(U,{src:e.src||"",width:e.width,title:e.title})),c.a.createElement(q.a,{style:{padding:"5px 5px"}},c.a.createElement(D.a,{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},variant:"caption",color:"textSecondary",component:"p"},e.title)))}))},W=function(e){var t=e.album,a=e.width,n={width:"15px",height:"15px",borderRadius:"50%",fontSize:"10px",color:"#fff",lineHeight:"15px",textAlign:"center",background:"#000"},r=[];t.appleMusicAlbum&&r.push(c.a.createElement(R.a,{key:1,item:!0,style:Object(b.a)({},n,{backgroundColor:"#ff2f56"})},"A")),t.itunesAlbum&&r.push(c.a.createElement(R.a,{key:2,item:!0,style:Object(b.a)({},n,{backgroundColor:"#0070c9"})},"iT")),t.spotifyAlbum&&r.push(c.a.createElement(R.a,{key:3,item:!0,style:Object(b.a)({},n,{backgroundColor:"#1DB954"})},"S"));var l=c.a.createElement(c.a.Fragment,null,r);return c.a.createElement(B,{title:t.name,src:t.artworkM.url,width:a,linkUrl:"/albums/".concat(t.id,"?q=").concat(t.id),componentInImage:l})},G=a(72),Q=a(17),_=a(87),J=function(e){var t=e.component,a=e.no,n=e.offset,r=e.limit,l=e.fetchMore,o=Object(i.useState)(!1),u=Object(Q.a)(o,2),m=u[0],s=u[1],d=a===n-r;return c.a.createElement(c.a.Fragment,null,t,d?c.a.createElement(_.a,{onEnter:function(){if(!m)return s(!0),l({variables:{offset:n},updateQuery:function(e,t){var a=t.fetchMoreResult;return a?Object(b.a)({},e,{},{items:[].concat(Object(G.a)(e.items),Object(G.a)(a.items))}):e}})}}):c.a.createElement(c.a.Fragment,null))},z=a(39),Y=a.n(z);function H(){var e=Object(f.f)(),t=new URLSearchParams(e.search),a=function(e){var a=t.get(e);if(null===a)return[];var n=a.split(","),r=new Set;return n.forEach((function(e){r.add(e)})),Array.from(r)},n={};return a("q").forEach((function(e){switch(!0){case/^art/.test(e):n=Y.a.merge(n,{artists:{id:[e]}});break;case/^abm/.test(e):n=Y.a.merge(n,{albums:{id:[e]}});break;case/^trk/.test(e):n=Y.a.merge(n,{tracks:{id:[e]}})}})),a("s").forEach((function(e){switch(e){case"p":n=Y.a.merge(n,{status:["PENDING"]});break;case"a":n=Y.a.merge(n,{status:["ACTIVE"]});break;case"i":n=Y.a.merge(n,{status:["IGNORE"]})}})),n}var V=function(){var e,t=H(),a=(e={variables:Object(b.a)({offset:0,limit:50,order:n.Release,asc:!0},{conditions:t}),fetchPolicy:"cache-first"},g.c(x,e)),r=a.error,l=a.data,i=a.fetchMore;if(r)return c.a.createElement("div",null,r.message);var o=[];return l&&(o=l.items.map((function(e,t){return c.a.createElement(J,{key:t,component:c.a.createElement(W,{album:e,width:"150px"}),no:t,offset:l.items.length,limit:50,fetchMore:i})}))),c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},o)},K=a(143),X=a(153),Z=a(144),ee=a(145),te=a(146),ae=a(88),ne=a.n(ae),re=a(89),le=a.n(re),ie=function(e){var t=e.children,a=e.window,n=Object(K.a)({target:a?a():void 0});return c.a.createElement(X.a,{appear:!1,direction:"down",in:!n},t)},ce=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie,null,c.a.createElement(Z.a,null,c.a.createElement(ee.a,null,c.a.createElement(R.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:3},c.a.createElement(R.a,{item:!0},c.a.createElement(D.a,{variant:"h6"},"\u30b2\u30fc\u30e0\u97f3\u697d")),c.a.createElement(R.a,{item:!0},c.a.createElement(te.a,{component:p.b,to:"/artists",edge:"start",size:"small",color:"inherit","aria-label":"menu"},c.a.createElement(ne.a,null))),c.a.createElement(R.a,{item:!0},c.a.createElement(te.a,{component:p.b,to:"/albums",edge:"start",size:"small",color:"inherit","aria-label":"menu"},c.a.createElement(le.a,null))))))),c.a.createElement(ee.a,{style:{margin:"4px"}}))},oe=a(19),ue=a(34),me=a(20),se=a(93),de=a(92),pe=a(90),fe=new se.a({uri:"https://video-game-music.net/graphql",credentials:"include"}),be=new me.a((function(e,t){return t(e)})),Ee=Object(pe.a)((function(e){var t=e.graphQLErrors,a=e.networkError;t&&t.map((function(e){var t=e.message,a=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(a,", Path: ").concat(n))})),a&&console.log("[Network error]: ".concat(a))})),he=me.a.from([be,Ee,fe]),ve=new ue.a({link:he,cache:new de.a({dataIdFromObject:function(e){return e.id}})}),ge=a(148),ye=a(151),we=a(149),je=function(e){var t=e.artist,a=e.width;return c.a.createElement(B,{title:t.name,src:t.artworkM.url,width:a,linkUrl:"/artists/".concat(t.id,"?q=").concat(t.id)})},Oe=function(){var e=H(),t=Object(g.c)($,{variables:Object(b.a)({offset:0,limit:30,order:"POPULARITY",asc:!1},{conditions:e}),fetchPolicy:"cache-first"}),a=t.error,n=t.data,r=t.fetchMore;if(a)return c.a.createElement("div",null,a.message);var l=[];return n&&(l=n.items.map((function(e,t){return c.a.createElement(J,{key:t,component:c.a.createElement(je,{artist:e,width:"150px",key:t}),no:t,offset:n.items.length,limit:30,fetchMore:r})}))),c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},l)},Ae=a(64),ke=a(65),Ie=a(66),Me=function(){var e,t,a,n,r=Object(f.g)().id,l=(n={variables:{id:r}},g.c(M,n)),i=l.loading,o=l.error,u=l.data,d=c.a.useState(null),p=Object(Q.a)(d,2),b=p[0],E=p[1];if(o)return c.a.createElement("div",null,o.message);var h=c.a.createElement(c.a.Fragment,null),v=function(e){return e.target.style.width=document.documentElement.scrollWidth+"px",e};if(!i&&u&&u.album){null===b&&(u.album.appleMusicAlbum?E(0):u.album.itunesAlbum?E(1):u.album.spotifyAlbum&&E(2));var y=[];u.album.appleMusicAlbum&&y.push(c.a.createElement(R.a,{item:!0,key:0},c.a.createElement(s.a,{theme:Object(m.a)({palette:{primary:Ae.a}})},c.a.createElement(ge.a,{href:"https://music.apple.com/jp/album/".concat(u.album.appleMusicAlbum.appleMusicId),target:"_blank",variant:"contained",color:"primary"},"Apple Music \u3067\u8074\u304f")))),u.album.itunesAlbum&&y.push(c.a.createElement(R.a,{item:!0,key:1},c.a.createElement(s.a,{theme:Object(m.a)({palette:{primary:ke.a}})},c.a.createElement(ge.a,{href:"https://music.apple.com/jp/album/".concat(u.album.itunesAlbum.appleMusicId),target:"_blank",variant:"contained",color:"primary"},"iTunes \u3067\u8074\u304f")))),u.album.spotifyAlbum&&y.push(c.a.createElement(R.a,{item:!0,key:2},c.a.createElement(s.a,{theme:Object(m.a)({palette:{primary:Ie.a}})},c.a.createElement(ge.a,{href:"https://open.spotify.com/album/".concat(u.album.spotifyAlbum.spotifyId),target:"_blank",variant:"contained",color:"primary"},"Spotify \u3067\u8074\u304f"))));var w=c.a.createElement(c.a.Fragment,null);u.album.appleMusicAlbum&&0===b&&(w=c.a.createElement("iframe",{onLoad:function(e){return v(e)},title:u.album.id,allow:"autoplay *; encrypted-media *;",width:"300",height:"500",frameBorder:"0",style:{overflow:"hidden",background:"transparent"},src:"https://embed.music.apple.com/jp/album/game/".concat(u.album.appleMusicAlbum.appleMusicId,"?app=music")})),u.album.itunesAlbum&&1===b&&(w=c.a.createElement("iframe",{onLoad:function(e){return v(e)},title:u.album.id,src:"https://tools.applemusic.com/embed/v1/album/".concat(u.album.itunesAlbum.appleMusicId,"?country=jp"),frameBorder:"0",width:"300",height:"500"})),u.album.spotifyAlbum&&2===b&&(w=c.a.createElement("iframe",{onLoad:function(e){return v(e)},title:u.album.id,src:"https://open.spotify.com/embed/album/".concat(u.album.spotifyAlbum.spotifyId),width:"300",height:"500",frameBorder:"0",allowTransparency:!0,allow:"encrypted-media"})),h=c.a.createElement(R.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},c.a.createElement(R.a,{item:!0},w),c.a.createElement(R.a,{item:!0},c.a.createElement(R.a,{container:!0,spacing:1,direction:"row"},y)),c.a.createElement(R.a,{container:!0,style:{padding:"4px 0"}},c.a.createElement(Oe,null)))}return c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},c.a.createElement(ye.a,{value:b||0,onChange:function(e,t){return E(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},c.a.createElement(we.a,{label:"Apple Music",disabled:!(null===u||void 0===u||null===(e=u.album)||void 0===e?void 0:e.appleMusicAlbum)}),c.a.createElement(we.a,{label:"iTunes",disabled:!(null===u||void 0===u||null===(t=u.album)||void 0===t?void 0:t.itunesAlbum)}),c.a.createElement(we.a,{label:"Spotify",disabled:!(null===u||void 0===u||null===(a=u.album)||void 0===a?void 0:a.spotifyAlbum)})),h)},xe=function(){var e=Object(f.g)().id,t=Object(g.c)(S,{variables:{id:e}}),a=t.error,n=t.data;if(a)return c.a.createElement("div",null,a.message);var r=c.a.createElement(c.a.Fragment,null);return n&&n.artist&&(r=c.a.createElement(R.a,null,c.a.createElement(B,{title:n.artist.name,src:n.artist.artworkL.url,width:270}),c.a.createElement("div",{style:{padding:"4px 0"}}),c.a.createElement(V,null))),c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},r)},Se=a(156),$e=a(154),Ce=a(155),Pe=a(152),Ne=function(){var e,t=Object(i.useState)(c.a.createElement(c.a.Fragment,null)),a=Object(Q.a)(t,2),n=a[0],r=a[1],l=Object(i.useState)(""),o=Object(Q.a)(l,2),u=o[0],m=o[1],s=Object(i.useState)(""),d=Object(Q.a)(s,2),p=d[0],f=d[1],b=(e={update:function(e,t){t.data.signin.error?r(c.a.createElement(Pe.a,{severity:"error"},t.data.signin.error)):r(c.a.createElement(Pe.a,{severity:"success"},"\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f"))},variables:{input:{username:u,password:p}}},g.b(N,e)),E=Object(Q.a)(b,1)[0];return c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},c.a.createElement("form",{autoComplete:"off"},c.a.createElement("div",null,c.a.createElement(Se.a,null,c.a.createElement($e.a,null,"\u30e6\u30fc\u30b6\u30fc\u540d"),c.a.createElement(Ce.a,{value:u,onChange:function(e){return m(e.target.value||"")}}))),c.a.createElement("div",null,c.a.createElement(Se.a,null,c.a.createElement($e.a,null,"\u30d1\u30b9\u30ef\u30fc\u30c9"),c.a.createElement(Ce.a,{value:p,onChange:function(e){return f(e.target.value||"")},type:"password"}))),c.a.createElement("div",null,c.a.createElement(ge.a,{type:"submit",onClick:function(e){e.preventDefault(),E()},variant:"contained"},"Signin")),c.a.createElement("div",null,n)))},Te=function(){var e,t=Object(i.useState)(c.a.createElement(c.a.Fragment,null)),a=Object(Q.a)(t,2),n=a[0],r=a[1],l=Object(i.useState)(""),o=Object(Q.a)(l,2),u=o[0],m=o[1],s=Object(i.useState)(""),d=Object(Q.a)(s,2),p=d[0],f=d[1],E=Object(i.useState)(""),h=Object(Q.a)(E,2),v=h[0],y=h[1],w=Object(i.useState)(""),j=Object(Q.a)(w,2),O=j[0],A=j[1],k=Object(i.useState)({oldPassword:v}),I=Object(Q.a)(k,2),M=I[0],x=I[1],S=g.c(C,e).data;""===u&&""===p&&S&&S.me&&(m(S.me.name),f(S.me.username));var $=[];S&&S.me&&($=S.me.role.allowedActions.map((function(e,t){return c.a.createElement("p",{key:t},e)})));var N=function(e){return g.b(P,e)}({update:function(e,t){t.data.updateMe.error?r(c.a.createElement(Pe.a,{severity:"error"},t.data.updateMe.error)):r(c.a.createElement(Pe.a,{severity:"success"},"\u66f4\u65b0\u3057\u307e\u3057\u305f"))},variables:{input:M}}),T=Object(Q.a)(N,1)[0];return c.a.createElement(R.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},c.a.createElement("form",{autoComplete:"off"},c.a.createElement("div",null,"ID: ",S&&S.me?S.me.id:""),c.a.createElement("div",null,c.a.createElement(Se.a,null,c.a.createElement($e.a,null,"\u540d\u524d"),c.a.createElement(Ce.a,{value:u,onChange:function(e){m(e.target.value||""),x(Object(b.a)({},M,{name:e.target.value||""}))}}))),c.a.createElement("div",null,c.a.createElement(Se.a,null,c.a.createElement($e.a,null,"\u30e6\u30fc\u30b6\u30fc\u540d"),c.a.createElement(Ce.a,{value:p,onChange:function(e){f(e.target.value||""),x(Object(b.a)({},M,{username:e.target.value||""}))}}))),c.a.createElement("div",null,c.a.createElement(Se.a,null,c.a.createElement($e.a,null,"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9"),c.a.createElement(Ce.a,{value:O,onChange:function(e){A(e.target.value||""),x(Object(b.a)({},M,{newPassword:e.target.value||""}))},type:"password"}))),c.a.createElement("div",null,c.a.createElement(Se.a,{required:!0},c.a.createElement($e.a,null,"\u53e4\u3044\u30d1\u30b9\u30ef\u30fc\u30c9"),c.a.createElement(Ce.a,{value:v,onChange:function(e){y(e.target.value||""),x(Object(b.a)({},M,{oldPassword:e.target.value||""}))},type:"password"}))),c.a.createElement("div",null,c.a.createElement(ge.a,{type:"submit",onClick:function(e){e.preventDefault(),T()},variant:"contained"},"Update")),c.a.createElement("div",null,n),c.a.createElement("div",null,"\u6a29\u9650: ",$)))},Le=function(){return c.a.createElement(p.a,null,c.a.createElement(oe.a,{client:ve},c.a.createElement(ce,null),c.a.createElement(f.c,null,c.a.createElement(f.a,{exact:!0,path:"/",component:V}),c.a.createElement(f.a,{exact:!0,path:"/artists",component:Oe}),c.a.createElement(f.a,{exact:!0,path:"/artists/:id",component:xe}),c.a.createElement(f.a,{exact:!0,path:"/albums",component:V}),c.a.createElement(f.a,{exact:!0,path:"/albums/:id",component:Me}),c.a.createElement(f.a,{exact:!0,path:"/signin",component:Ne}),c.a.createElement(f.a,{exact:!0,path:"/me",component:Te}))))},Ue=Object(m.a)({palette:{type:"dark"},typography:{fontFamily:['"Noto Sans JP"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),Re=function(){return c.a.createElement(s.a,{theme:Ue},c.a.createElement(d.a,null),c.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Noto+Sans+JP",rel:"stylesheet"}),c.a.createElement(Le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=function(){return c.a.createElement(Re,null)};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),u.a.render(c.a.createElement(Fe,null),document.querySelector("#app"))},99:function(e,t,a){e.exports=a(112)}},[[99,1,2]]]);
//# sourceMappingURL=main.ae173bf5.chunk.js.map