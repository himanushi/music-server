(this["webpackJsonpmusic-client"]=this["webpackJsonpmusic-client"]||[]).push([[0],{85:function(e,t,n){e.exports=n(98)},98:function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),l=n.n(i),c=n(24),o=n.n(c),m=n(75),s=n(126),u=n(127),d=n(23),f=n(28),p=n(15),b=n(21),h=n(43),E=n(44),g=n.n(E);n(27),n(36);function w(){var e=Object(h.a)(["\n    query Artists($offset: Int, $limit: PositiveNumber, $order: ArtistsQueryOrder!, $asc: Boolean) {\n  items: artists(offset: $offset, limit: $limit, order: $order, asc: $asc) {\n    id\n    name\n    artworkL {\n      url\n      width\n      height\n    }\n    artworkM {\n      url\n      width\n      height\n    }\n  }\n}\n    "]);return w=function(){return e},e}function y(){var e=Object(h.a)(["\n    query Artist($id: TTID!) {\n  artist(id: $id) {\n    id\n    name\n    appleMusicArtists {\n      id\n    }\n    spotifyArtists {\n      id\n    }\n    artworkL {\n      url\n      width\n      height\n    }\n  }\n}\n    "]);return y=function(){return e},e}function v(){var e=Object(h.a)(["\n    query Albums($conditions: AlbumsConditions, $offset: Int, $limit: PositiveNumber, $order: AlbumsQueryOrder!, $asc: Boolean) {\n  items: albums(conditions: $conditions, offset: $offset, limit: $limit, order: $order, asc: $asc) {\n    id\n    artworkM {\n      url\n      width\n      height\n    }\n    appleMusicAlbum {\n      id\n    }\n    itunesAlbum {\n      id\n    }\n    spotifyAlbum {\n      id\n    }\n  }\n}\n    "]);return v=function(){return e},e}function A(){var e=Object(h.a)(["\n    query Album($id: TTID!) {\n  album(id: $id) {\n    id\n    totalTracks\n    name\n    releaseDate\n    artworkL {\n      url\n      width\n      height\n    }\n    artworkM {\n      url\n      width\n      height\n    }\n    appleMusicAlbum {\n      id\n      appleMusicId\n    }\n    itunesAlbum {\n      id\n      appleMusicId\n    }\n    spotifyAlbum {\n      id\n      spotifyId\n    }\n  }\n}\n    "]);return A=function(){return e},e}!function(e){e.Name="NAME",e.New="NEW",e.Release="RELEASE",e.Popularity="POPULARITY",e.TotalTracks="TOTAL_TRACKS"}(a||(a={})),function(e){e.New="NEW",e.Popularity="POPULARITY"}(r||(r={}));var j=g()(A());var k=g()(v());var I=g()(y());var O=g()(w());var M=n(119),$=n(116),x=function(e){var t=e.className,n=void 0===t?"":t,a=e.src,r=void 0===a?"":a,i=e.title,c=void 0===i?"":i,o=e.width;return""===r&&(r="".concat("","/no_image.png")),l.a.createElement($.a,{className:n,image:r,title:c,style:{width:o,height:o}})},P=n(118),T=n(120),L=function(e){var t=e.linkUrl?{component:d.b,to:e.linkUrl}:{};return l.a.createElement(P.a,Object(p.a)({container:!0,item:!0,xs:!0,direction:"row",justify:"center",alignItems:"center"},t,{children:l.a.createElement(M.a,{style:{width:e.width,position:"relative"}},l.a.createElement(T.a,null,l.a.createElement(P.a,{container:!0,style:{position:"absolute",left:"5px",bottom:"5px"}},e.componentInImage?e.componentInImage:l.a.createElement(l.a.Fragment,null)),l.a.createElement(x,{src:e.src||"",width:e.width,title:e.title})))}))},S=function(e){var t=e.album,n=e.width,a={width:"15px",height:"15px",borderRadius:"50%",fontSize:"10px",color:"#fff",lineHeight:"15px",textAlign:"center",background:"#000"},r=[];t.appleMusicAlbum&&r.push(l.a.createElement(P.a,{item:!0,style:Object(p.a)({},a,{backgroundColor:"#ff2f56"})},"A")),t.itunesAlbum&&r.push(l.a.createElement(P.a,{item:!0,style:Object(p.a)({},a,{backgroundColor:"#0070c9"})},"iT")),t.spotifyAlbum&&r.push(l.a.createElement(P.a,{item:!0,style:Object(p.a)({},a,{backgroundColor:"#1DB954"})},"S"));var i=l.a.createElement(l.a.Fragment,null,r);return l.a.createElement(L,{title:t.name,src:t.artworkM.url,width:n,linkUrl:"/albums/".concat(t.id),componentInImage:i})},N=n(59),R=n(77),F=n(72),U=function(e){var t=e.component,n=e.no,a=e.offset,r=e.limit,c=e.fetchMore,o=Object(i.useState)(!1),m=Object(R.a)(o,2),s=m[0],u=m[1],d=n===a-r;return l.a.createElement(l.a.Fragment,null,t,d?l.a.createElement(F.a,{onEnter:function(){if(!s)return u(!0),c({variables:{offset:a},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Object(p.a)({},e,{},{items:[].concat(Object(N.a)(e.items),Object(N.a)(n.items))}):e}})}}):l.a.createElement(l.a.Fragment,null))},q=n(54),B=n.n(q);var C=function(){var e=function(){var e=Object(f.f)(),t=new URLSearchParams(e.search),n={};return function(e){var n=t.get(e);if(null===n)return[];var a=n.split(","),r=new Set;return a.forEach((function(e){r.add(e)})),Array.from(r)}("q").forEach((function(e){switch(!0){case/^arst/.test(e):n=B.a.merge(n,{artists:{id:[e]}});break;case/^albm/.test(e):n=B.a.merge(n,{albums:{id:[e]}});break;case/^trak/.test(e):n=B.a.merge(n,{tracks:{id:[e]}})}})),n}(),t=Object(b.b)(k,{variables:Object(p.a)({offset:0,limit:50,order:"RELEASE",asc:!0},{conditions:e}),fetchPolicy:"cache-first"}),n=t.error,a=t.data,r=t.fetchMore;if(n)return l.a.createElement("div",null,n.message);var i=[];return a&&(i=a.items.map((function(e,t){return l.a.createElement(U,{key:t,component:l.a.createElement(S,{album:e,width:"150px",key:t}),no:t,offset:a.items.length,limit:50,fetchMore:r})}))),l.a.createElement(P.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},i)},D=n(121),J=n(128),z=n(122),H=n(123),Q=n(124),W=n(125),Y=n(73),_=n.n(Y),K=n(74),G=n.n(K),V=function(e){var t=e.children,n=e.window,a=Object(D.a)({target:n?n():void 0});return l.a.createElement(J.a,{appear:!1,direction:"down",in:!a},t)},X=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(V,null,l.a.createElement(z.a,null,l.a.createElement(H.a,null,l.a.createElement(P.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:3},l.a.createElement(P.a,{item:!0},l.a.createElement(Q.a,{variant:"h6"},"\u30b2\u30fc\u30e0\u97f3\u697d")),l.a.createElement(P.a,{item:!0},l.a.createElement(W.a,{component:d.b,to:"/artists",edge:"start",size:"small",color:"inherit","aria-label":"menu"},l.a.createElement(_.a,null),"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8")),l.a.createElement(P.a,{item:!0},l.a.createElement(W.a,{component:d.b,to:"/albums",edge:"start",size:"small",color:"inherit","aria-label":"menu"},l.a.createElement(G.a,null),"\u30a2\u30eb\u30d0\u30e0")))))),l.a.createElement(H.a,{style:{margin:"4px"}}))},Z=n(7),ee=n(29),te=n(19),ne=n(78),ae=n(76),re=new te.a((function(e,t){return t(e)})),ie="http://0.0.0.0:3000/graphql";ie="https://music-server.himacloud.app/graphql";var le=new ne.a({uri:ie}),ce=te.a.from([re,le]),oe=new ee.a({link:ce,cache:new ae.a}),me=function(){var e=Object(f.g)().id,t=Object(b.b)(j,{variables:{id:e}}),n=t.loading,a=t.error,r=t.data;if(a)return l.a.createElement("div",null,a.message);var i=l.a.createElement(l.a.Fragment,null),c=function(e){var t=e.target;return t.style.width=document.documentElement.scrollWidth+"px",t.style.height=document.documentElement.scrollHeight-70+"px",e};if(n||!r);else if(r.album){var o=l.a.createElement(l.a.Fragment,null);r.album.appleMusicAlbum?o=l.a.createElement("iframe",{onLoad:function(e){return c(e)},title:r.album.id,allow:"autoplay *; encrypted-media *;",frameBorder:"0",width:"660",height:"500",style:{overflow:"hidden",background:"transparent"},src:"https://embed.music.apple.com/jp/album/game/".concat(r.album.appleMusicAlbum.appleMusicId,"?app=music")}):r.album.itunesAlbum?o=l.a.createElement("iframe",{onLoad:function(e){return c(e)},title:r.album.id,src:"https://tools.applemusic.com/embed/v1/album/".concat(r.album.itunesAlbum.appleMusicId,"?country=jp"),frameBorder:"0",width:"660",height:"500"}):r.album.spotifyAlbum&&(o=l.a.createElement("iframe",{onLoad:function(e){return c(e)},title:r.album.id,src:"https://open.spotify.com/embed/album/".concat(r.album.spotifyAlbum.spotifyId),width:"660",height:"500",frameBorder:"0",allowTransparency:!0,allow:"encrypted-media"})),i=l.a.createElement(l.a.Fragment,null,o)}return l.a.createElement(P.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},i)},se=function(e){var t=e.artist,n=e.width,a=l.a.createElement("span",{style:{color:"black"}},t.name);return l.a.createElement(L,{title:t.name,src:t.artworkM.url,width:n,linkUrl:"/artists/".concat(t.id,"?q=").concat(t.id),componentInImage:a})},ue=function(){var e=Object(b.b)(O,{variables:{offset:0,limit:30,order:"POPULARITY",asc:!1},fetchPolicy:"cache-first"}),t=e.error,n=e.data,a=e.fetchMore;if(t)return l.a.createElement("div",null,t.message);var r=[];return n&&(r=n.items.map((function(e,t){return l.a.createElement(U,{key:t,component:l.a.createElement(se,{artist:e,width:"150px",key:t}),no:t,offset:n.items.length,limit:30,fetchMore:a})}))),l.a.createElement(P.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},r)},de=function(){var e=Object(f.g)().id,t=Object(b.b)(I,{variables:{id:e}}),n=t.error,a=t.data;if(n)return l.a.createElement("div",null,n.message);var r=l.a.createElement(l.a.Fragment,null);return a&&a.artist&&(r=l.a.createElement(P.a,null,l.a.createElement(L,{title:a.artist.name,src:a.artist.artworkL.url,width:270}),l.a.createElement("div",{style:{padding:"4px 0"}}),l.a.createElement(C,null))),l.a.createElement(P.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},r)},fe=function(){return l.a.createElement(d.a,null,l.a.createElement(Z.b,{client:oe},l.a.createElement(X,null),l.a.createElement(f.c,null,l.a.createElement(f.a,{exact:!0,path:"/artists",component:ue}),l.a.createElement(f.a,{exact:!0,path:"/artists/:id",component:de}),l.a.createElement(f.a,{exact:!0,path:"/albums",component:C}),l.a.createElement(f.a,{exact:!0,path:"/albums/:id",component:me}))))},pe=Object(m.a)({palette:{type:"dark"},typography:{fontFamily:['"Noto Sans JP"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),be=function(){return l.a.createElement(s.a,{theme:pe},l.a.createElement(u.a,null),l.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Noto+Sans+JP",rel:"stylesheet"}),l.a.createElement(fe,null))},he=function(){return l.a.createElement(be,null)};o.a.render(l.a.createElement(he,null),document.querySelector("#app"))}},[[85,1,2]]]);
//# sourceMappingURL=main.4db6d50f.chunk.js.map